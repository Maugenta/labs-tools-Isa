{% extends "main/layout.html" %}
{% block content%}
<div class="container page-header text-center">
    <h1>{{ campaign.campaign_name }}</h1>
    <hr>
    <p>{{campaign.short_description}}</p>
</div>

<div class="container text-center">
    <div class="campaign-panel primary-cta">
    {% if is_wiki_loves_campaign %}
        <div class="campaign-country-select">
            <p>{{_('View images from')}}</p>
            <select id="campaign_countries" class="fas fa-caret-down custom-select btn-new" data-style="btn-new">
                <option class="select-option" value= "all" select="selected">{{_('All countries')}}</option>
                <!-- The other obtions will be povided here on front-end -->
            </select>
        </div>           
    {% endif %}
        <a id="get_started_btn" href="{{url_for('campaigns.contributeToCampaign', id=campaign.id ) }}" class="btn btn-primary" >{{ _('Get Started') }}</a>
    </div>
</div>

<div class="container campaign-stats text-center">
    <div class="campaign-panel">
        <div class="campaign-stats-title">
            <h4>{{ _('Campaign Progress') }}</h4>
        </div>
    <div class="main-stats-label-group mx-auto">
        <div class="label btn btn-warning">{{ _('Editors') }}<br>{{ campaign_editors }}</div>
        <div class="label btn btn-warning">{{ _('Contributions') }}<br>{{ campaign_contributions }}</div>
    </div>
    <div class="stats-table mx-auto">
        <div class="top-user-table mr-4">				
            <table class="table table-sm table-light text-center">
                <h6>{{ _('Top Contributors') }}</h6>
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">{{ _('Contributor') }}</th>
                        <th scope="col">{{ _('Images Improved') }}</th>
                    </tr>
                </thead>
                {% if all_contributors_data %}
                <tbody>
                {% for contributor_data in all_contributors_data %}
                    <tr>
                        <th scope="row">{{contributor_data['rank']}}</th>
                        <td>{{contributor_data['username']}}</td>
                        <td>{{contributor_data['images_improved']}}</td>
                    </tr>
                {% endfor %}
                </tbody>
                {% else %}
                <tbody>
                    <tr>
                        <th scope="row"></th>
                        <td></td>
                        <td class="text-center">{{ _('No partcipants has contributed to this campaign') }}</td>
                    </tr>
                </tbody>
                {% endif %}
            </table>
        </div>
        <div class="top-country-table">
            <table class="table table-sm table-light text-center">
                <h6>{{ _('Most improved Countries') }}</h6>
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">{{ _('Country') }}</th>
                            <th scope="col">{{ _('Images Improved') }}</th>
                        </tr>
                    </thead>
                    {% if all_campaign_country_statistics_data %}
                        <tbody>
                            {% for country_statistics_data in all_campaign_country_statistics_data %}
                                <tr>
                                    <th scope="row">{{country_statistics_data['rank']}}</th>
                                    <td>{{country_statistics_data['country']}}</td>
                                    <td>{{country_statistics_data['images_improved']}}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    {% else %}
                        <tbody>
                            <tr>
                                <th scope="row"></th>
                                <td></td>
                                <td class="text-center">{{ _('There is no data available yet for this campaign') }}</td>
                            </tr>
                        </tbody>
                    {% endif %}
            </table>
        </div>
    </div>
    <div class="main-stats-label-group mx-auto mt-3">
        <a id="download_country_stats_btn" href="{{url_for('campaigns.downloadContributionStats', id=campaign.id, filename=contributor_csv_file) }}"  class="btn btn-sm btn-primary" >{{ _('Download Contrib Stats') }}</a>
        <a id="download_country_stats_btn" href="{{url_for('campaigns.downloadCountryStats', id=campaign.id, filename=country_csv_file) }}"  class="btn btn-sm btn-primary" >{{ _('Download Country Stats') }}</a>
    </div>
</div>
</div>

<div class="container user-stats text-center">
    <div class="campaign-panel">
        <div class="campaign-stats-title">
            <h4>{{ _('My Contributions') }}</h4>
        </div>
        {% if username != 'Guest' and username != False and username != None %}
        <div  class="stats-table mx-auto">
            <table class="table table-sm table-light text-center">
                <thead>
                    <tr>
                        <th scope="col">{{ _('Rank') }}</th>
                        <th scope="col">{{ _('Images Improved') }}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr  class="table-warning">
                        <th scope="row">{{current_user_rank}}</th>
                        <td>{{current_user_images_improved}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        {% endif %}
    </div>
</div>

<hr>

<div class="container campaign-info justify-content-center text-center">
    <h3>{{ _('More About This Campaign') }}</h3>
    <div class="campaign-dates">
        <h6><strong>{{ _('START DATE')}}: </strong> {{campaign.start_date}}</h6>
        <h6><strong>{{ _('END DATE') }}: </strong> {{campaign.end_date}}</h6>	
    </div>
    <div class="about-section">
        <p>{{campaign.long_description}}</p>
    </div>
    {% if campaign_manager ==  username %}
    <a id="" href="{{url_for('campaigns.updateCampaign', id=campaign.id)}}" class="btn btn-danger" >{{ _('Edit Campaign') }}</a>
    {% endif %}
</div>

{% endblock content%}
{% block scripts %}
    <script src="{{url_for('static', filename='js/campaign.js')}}"></script>
{% endblock scripts%}