{% extends "main/layout.html" %}
{% block content %}
<div class="container">
    <strong><h5 class=" pt-1 pb-0 d-flex justify-content-center">{{ _('Create new Campaign') }}</h5></strong>
    <hr class="pt-0" width="35%">
    <div class="pt-0 mt-0 text-center">
        <small> {{ _('Fill in the form below to create you campaign') }}, <br> {{ _('Fields marked with * are mandatory') }}</small>
    </div>
    <div class="d-flex justify-content-center">
        <form  class="" method="POST" action="">
            {{ form.csrf_token }}
            <!-- {{ form.campaign_name.label( class="form-control-label" ) }} -->
            <small class="form-control-label">{{ _('Campaign Name') }}</small>
            <div class="form-group">
                <!-- We test for errors in the form data here -->
                 {% if form.campaign_name.errors %}
                    {{ form.campaign_name( class="form-control form-control-sm is-nvalid" ) }}
                    <div class="invalid-feedback">
                        {% for error in form.campaign_name.errors %}
                        <span> {{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.campaign_name( class="form-control form-control-sm" ) }}
                {% endif %}
            </div>
            <div class="form-group">
                <!-- {{ form.short_description.label( class="form-control-label " ) }} -->
                <small class="form-control-label">{{ _('Short description of Campaign') }}</small>
                <!-- We test for errors in the form data here -->
                {% if form.short_description.errors %}
                    {{ form.short_description( class="form-control form-control-lg is-invalid" ) }}
                    <div class="invalid-feedback">
                        {% for error in form.short_description.errors %}
                            <span> {{ error }}</span>
                        {% endfor %}
                   </div>
                {% else %}
                    {{ form.short_description( class="form-control form-control-sm" ) }}
                {% endif %}
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-sm-6 ml-auto">
                        <div class="input-group date">
                            <small class="datepicker">{{ _('Start Date') }}</small> &nbsp;&nbsp;
                            <!-- We test for errors in the form data here -->
                            {% if form.start_date.errors %}
                                {{ form.start_date( class="form-control form-control-sm is-invalid" ) }}
                                <div class="invalid-feedback">
                                    {% for error in form.start_date.errors %}
                                        <span> {{ error }}</span>
                                    {% endfor %}
                                </div>
                            {% else %}
                                {{ form.start_date( class="form-control form-control-sm" ) }}
                            {% endif %}
                            </div>
                    </div>
                    <div class="col-sm-6 ml-auto">
                        <div class="input-group date">
                            <small class="datepicker">{{ _('End Date') }}</small> &nbsp;&nbsp;
                            <!-- We test for errors in the form data here -->
                            {% if form.end_date.errors %}
                                {{ form.end_date( class="form-control form-control-md is-invalid" ) }}
                                <div class="invalid-feedback">
                                    {% for error in form.end_date.errors %}
                                        <span> {{ error }}</span>
                                    {% endfor %}
                                </div>
                            {% else %}
                                {{ form.end_date( class="form-control form-control-sm" ) }}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div id="campaign_stats_table" class="pb-5 navbar-light bg-light text-center">
                    <div class="row">
                        <div class="col ">
                            <div class="pb-0 ml-auto">{{ _('Categories') }}<span><i class="fas fa-question-circle" data-toggle="tooltip" data-placement="right" title="select a category by clicking on it"></i>
                            </span></div>
                            <!-- We test for errors in the form data here -->
                            {% if form.categories.errors %}
                                {{ form.categories( class="form-control form-control-lg is-invalid" ) }}
                                <div class="invalid-feedback">
                                    {% for error in form.categories.errors %}
                                        <span> {{ error }}</span>
                                    {% endfor %}
                                </div>
                            {% else %}
                                {{ form.categories( id="categories-data", class="form-control form-control-sm") }}
                            {% endif %}
                            
                            <!-- Category selection UI which is NOT submitted in the form --> 
                            <select id="category-search"></select>
                            <table>
                                <thead id="selected-categories-header">
                                    <tr>
                                        <th>{{ _('Name') }}</th>
                                        <th>{{ _('Depth') }}</th>
                                    </tr>
                                </thead>
                                <tbody id="selected-categories-content">
                                       <!-- populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
           <div class="form-group">
                <div id="campaign_stats_table" class="pb-3 navbar-light bg-light text-center">
                    <small>{{ _('Metadata to collect in the Cmapign') }}</small>
                    <div class="row pt-2">
                        <div class="col-sm-6 mr-auto">
                            <div class="input-group date">
                                <small><strong>{{ _('Depicts') }}</strong></small> &nbsp;
                                <!-- We test for errors in the form data here -->
                                {% if form.depicts_metadata.errors %}
                                    {{ form.depicts_metadata( class="form-control form-control-sm is-invalid" ) }}
                                    <div class="invalid-feedback">
                                        {% for error in form.depicts_metadata.errors %}
                                            <span> {{ error }}</span>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    {{ form.depicts_metadata( class="checkbox-inline mt-1" ) }}
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-sm-6 mr-auto">
                            <div class="input-group">
                                <small><strong>{{ _('Captions') }}</strong></small> &nbsp;
                                <!-- We test for errors in the form data here -->
                                {% if form.captions_metadata.errors %}
                                    {{ form.captions_metadata( class="form-control form-control-sm is-invalid" ) }}
                                    <div class="invalid-feedback">
                                        {% for error in form.captions_metadata.errors %}
                                            <span> {{ error }}</span>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    {{ form.captions_metadata( class='checkbox-inline mt-1' ) }}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="navbar-light bg-light">
                <div class="form-group">
                    <div class="row">
                        <div class="col-md-6 ml-auto mr-auto">
                            <div class="input-group date pt-3">
                                <small><strong>{{ _('This is a Wiki Loves Campaign') }}</strong></small> &nbsp;&nbsp;
                                <!-- We test for errors in the form data here -->
                                {% if form.campaign_type.errors %}
                                    {{ form.campaign_type( class="form-control form-control-sm is-invalid" ) }}
                                    <div class="invalid-feedback">
                                        {% for error in form.campaign_type.errors %}
                                            <span> {{ error }}</span>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    {{ form.campaign_type( class="form-control form-control-sm mt-1" ) }}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                {{ _('Long description of Campaign(full about info)') }}
                <!-- We test for errors in the form data here -->
                {% if form.long_description.errors %}
                    {{ form.long_description( class="form-control form-control-sm is-invalid" ) }}
                    <div class="invalid-feedback">
                        {% for error in form.long_description.errors %}
                            <span> {{ error }}</span>
                        {% endfor %}
                   </div>
                {% else %}
                    {{ form.long_description( class="form-control form-control-md" ) }}
                {% endif %}
            </div>
            <div class="form-group text-center">
                {{ form.submit( class="btn btn-primary", value=_('Publish Campaign') ) }}
            </div>
        </form>
    </div>
</div>
{% endblock content %}
{% block scripts %}
    <script src="{{url_for('static', filename='js/campaign-form.js')}}"></script>
{% endblock scripts%}